!function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);class n{constructor(){this.observers=[]}addObserver(e){this.observers.push(e)}delObserver(e){this.observers.splice(this.observers.indexOf(e))}notifyAll(e,t){for(var s=0;s<this.observers.length;s++)this.observers[s].on(this,e,t)}}class i extends n{constructor(){super();const e=document.getElementById("button");this.input_field=document.getElementById("input"),this.messagesBox=document.getElementById("messages"),this.autorizate=document.getElementById("autorizate"),this.aoutowindow=document.getElementById("autenfication"),this.username=document.getElementById("username"),this.password=document.getElementById("password"),autorizate.addEventListener("click",function(e){this.aoutowindow.style.display="none",this.notifyAll("somebody wants to came in",[this.username.value,this.password.value])}.bind(this)),e.addEventListener("click",function(e){this.notifyAll("user_wants_to_send",this.input_field.value)}.bind(this)),this.input_field.addEventListener("keyup",function(e){13===e.keyCode&&this.notifyAll("user_wants_to_send",this.input_field.value)}.bind(this))}putMessageIntoDoc(e){this.messagesBox.appendChild(this.messageInDiv(e)),this.input_field.value="";let t=this.messagesBox.scrollHeight;this.messagesBox.scrollTop=t}messageInDiv(e){const t=document.createElement("div");t.className="bubble";const s=document.createElement("div");s.className="message_content";const n=document.createElement("div");return n.className="message_info",s.innerHTML=e.content,n.innerHTML=e.date,t.appendChild(s),t.appendChild(n),t}on(e,t,s){"view_take_this"==t&&this.putMessageIntoDoc(s),"log in"==t&&(console.log("logiiiiin"),this.aoutowindow.style.display="none")}}class o{constructor(e){const t=new Date,s=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+(t.getHours()+":"+t.getMinutes()+":"+t.getSeconds());this.date=s,this.content=e}}class r extends n{constructor(){super(),this.messages=[]}addMessage(e){this.messages.push(new o(e))}putLastMessageIntoView(){this.notifyAll("view_take_this",this.messages[this.messages.length-1])}on(e,t,s){"data_ok_lets_send_it"==t&&(this.addMessage(s),this.putLastMessageIntoView())}}class a extends n{constructor(){super()}on(e,t,s){"user_wants_to_send"==t&&this.checkData(s)&&this.notifyAll("data_ok_lets_send_it",s),s&&this.Security(s)&&this.notifyAll("log in",s)}checkData(e){if(""!=e)return!0}Security(e){return"admin"!=e[0]?(console.log(e[0]),!1):"admin"==e[1]||(console.log(e[1]),!1)}}window.addEventListener("DOMContentLoaded",(function(){const e=new i,t=new r,s=new a;e.addObserver(s),t.addObserver(s),t.addObserver(e),s.addObserver(t)}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvb2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy92aWV3LmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL21lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvbW9kZWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIk9ic2VydmFibGUiLCJ0aGlzIiwib2JzZXJ2ZXJzIiwib2JqIiwicHVzaCIsInNwbGljZSIsImluZGV4T2YiLCJlIiwiZGF0YSIsImxlbmd0aCIsIm9uIiwic3VwZXIiLCJzZW5kX2J1dHRvbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbnB1dF9maWVsZCIsIm1lc3NhZ2VzQm94IiwiYXV0b3JpemF0ZSIsImFvdXRvd2luZG93IiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInN0eWxlIiwiZGlzcGxheSIsIm5vdGlmeUFsbCIsImtleUNvZGUiLCJtZXNzIiwiYXBwZW5kQ2hpbGQiLCJtZXNzYWdlSW5EaXYiLCJpbnRlcnZhbCIsInNjcm9sbEhlaWdodCIsInNjcm9sbFRvcCIsIm1lc3NhZ2UiLCJidWJibGUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiY29udGVudCIsImluZm8iLCJpbm5lckhUTUwiLCJkYXRlIiwicHV0TWVzc2FnZUludG9Eb2MiLCJjb25zb2xlIiwibG9nIiwiTWVzc2FnZSIsInRvZGF5IiwiRGF0ZSIsImRhdGVUaW1lIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwibWVzc2FnZXMiLCJhZGRNZXNzYWdlIiwicHV0TGFzdE1lc3NhZ2VJbnRvVmlldyIsImNoZWNrRGF0YSIsIlNlY3VyaXR5Iiwid2luZG93IiwidmlldyIsIm1vZGVsIiwiY29udHJvbGxlciIsImFkZE9ic2VydmVyIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIs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Q0MsT0FBTyxFQUVmLFNBQVNBLEdBRUwsTUFBWSxTQUFUQSxFQUFLLElBQ0prQyxRQUFRQyxJQUFJbkMsRUFBSyxLQUNWLEdBR0MsU0FBVEEsRUFBSyxLQUNKa0MsUUFBUUMsSUFBSW5DLEVBQUssS0FDVixJQ3BDbkJtRCxPQUFPdEMsaUJBRUgsb0JBQ0EsV0FFSSxNQUFNdUMsRUFBTyxJQUFJLEVBQ1hDLEVBQVEsSUFBSSxFQUNaQyxFQUFhLElBQUksRUFFdkJGLEVBQUtHLFlBQVlELEdBQ2pCRCxFQUFNRSxZQUFZRCxHQUNsQkQsRUFBTUUsWUFBWUgsR0FDbEJFLEVBQVdDLFlBQVlGIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgY2xhc3MgT2JzZXJ2YWJsZSBcclxue1xyXG4gICAgY29uc3RydWN0b3IoKSBcclxuICAgIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhZGRPYnNlcnZlcihvYmopXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYmopXHJcbiAgICB9XHJcblxyXG4gICAgZGVsT2JzZXJ2ZXIob2JqKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnNwbGljZSh0aGlzLm9ic2VydmVycy5pbmRleE9mKG9iaikpO1xyXG4gICAgfVxyXG5cclxuICAgIG5vdGlmeUFsbChlLCBkYXRhKSBcclxuICAgIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzW2ldLm9uKHRoaXMsIGUsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSBcIi4vb2JzZXJ2YWJsZVwiXHJcblxyXG5leHBvcnQgY2xhc3MgVmlldyBleHRlbmRzIE9ic2VydmFibGVcclxue1xyXG4gICAgY29uc3RydWN0b3IoKSBcclxuICAgIHtcclxuICAgICAgICBzdXBlcigpXHJcbiAgICAgICAgY29uc3Qgc2VuZF9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnV0dG9uJyk7XHJcbiAgICAgICAgdGhpcy5pbnB1dF9maWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dCcpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXNCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZXMnKTtcclxuICAgICAgICB0aGlzLmF1dG9yaXphdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b3JpemF0ZScpXHJcbiAgICAgICAgdGhpcy5hb3V0b3dpbmRvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRlbmZpY2F0aW9uJylcclxuICAgICAgICB0aGlzLnVzZXJuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJuYW1lJylcclxuICAgICAgICB0aGlzLnBhc3N3b3JkICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpXHJcblxyXG4gICAgICAgIGF1dG9yaXphdGUuYWRkRXZlbnRMaXN0ZW5lcihcclxuXHRcdFxyXG5cdFx0XHRcImNsaWNrXCIsZnVuY3Rpb24oZXZlbnQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLmFvdXRvd2luZG93LnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XHJcblx0XHRcdFx0dGhpcy5ub3RpZnlBbGwoXCJzb21lYm9keSB3YW50cyB0byBjYW1lIGluXCIsIFt0aGlzLnVzZXJuYW1lLnZhbHVlLCB0aGlzLnBhc3N3b3JkLnZhbHVlXSk7XHJcblx0XHRcdH0uYmluZCh0aGlzKVxyXG5cdFx0XHRcclxuXHRcdClcclxuXHJcblxyXG4gICAgICAgIHNlbmRfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY2xpY2tcIixmdW5jdGlvbihldmVudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlBbGwoXCJ1c2VyX3dhbnRzX3RvX3NlbmRcIiwgdGhpcy5pbnB1dF9maWVsZC52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcclxuXHJcbiAgICAgICAgdGhpcy5pbnB1dF9maWVsZC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImtleXVwXCIsZnVuY3Rpb24oZXZlbnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykgXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlBbGwoXCJ1c2VyX3dhbnRzX3RvX3NlbmRcIiwgdGhpcy5pbnB1dF9maWVsZC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcclxuICAgIH1cclxuICAgIHB1dE1lc3NhZ2VJbnRvRG9jKG1lc3MpIFxyXG4gICAge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXNCb3guYXBwZW5kQ2hpbGQodGhpcy5tZXNzYWdlSW5EaXYobWVzcykpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRfZmllbGQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIGxldCBpbnRlcnZhbCA9IHRoaXMubWVzc2FnZXNCb3guc2Nyb2xsSGVpZ2h0XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlc0JveC5zY3JvbGxUb3AgPSBpbnRlcnZhbFxyXG4gICAgfVxyXG4gICAgbWVzc2FnZUluRGl2KG1lc3NhZ2UpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgYnViYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICBidWJibGUuY2xhc3NOYW1lID0gXCJidWJibGVcIlxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgIGNvbnRlbnQuY2xhc3NOYW1lID0gXCJtZXNzYWdlX2NvbnRlbnRcIlxyXG4gICAgICAgIGNvbnN0IGluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgIGluZm8uY2xhc3NOYW1lID0gXCJtZXNzYWdlX2luZm9cIlxyXG4gICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gbWVzc2FnZS5jb250ZW50XHJcbiAgICAgICAgaW5mby5pbm5lckhUTUwgPSBtZXNzYWdlLmRhdGVcclxuICAgICAgICBidWJibGUuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcbiAgICAgICAgYnViYmxlLmFwcGVuZENoaWxkKGluZm8pO1xyXG4gICAgICAgIHJldHVybiBidWJibGVcclxuICAgIH1cclxuICAgIG9uKG9iaiwgZXZlbnQsIGRhdGEpIFxyXG4gICAge1xyXG4gICAgICAgIGlmKGV2ZW50ID09IFwidmlld190YWtlX3RoaXNcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMucHV0TWVzc2FnZUludG9Eb2MoZGF0YSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoZXZlbnQgPT0gXCJsb2cgaW5cIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibG9naWlpaWluXCIpXHJcbiAgICAgICAgICAgIHRoaXMuYW91dG93aW5kb3cuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgTWVzc2FnZVxyXG57XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZW50KVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCBkYXRlID0gdG9kYXkuZ2V0RnVsbFllYXIoKSsnLScrKHRvZGF5LmdldE1vbnRoKCkrMSkrJy0nK3RvZGF5LmdldERhdGUoKTtcclxuICAgICAgICBjb25zdCB0aW1lID0gdG9kYXkuZ2V0SG91cnMoKSArIFwiOlwiICsgdG9kYXkuZ2V0TWludXRlcygpICsgXCI6XCIgKyB0b2RheS5nZXRTZWNvbmRzKCk7XHJcbiAgICAgICAgY29uc3QgZGF0ZVRpbWUgPSBkYXRlKycgJyt0aW1lO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5kYXRlID0gZGF0ZVRpbWU7XHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgIH1cclxufSIsImltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSBcIi4vb2JzZXJ2YWJsZVwiXHJcbmltcG9ydCB7TWVzc2FnZX0gZnJvbSBcIi4vbWVzc2FnZVwiXHJcbmV4cG9ydCBjbGFzcyBNb2RlbCBleHRlbmRzIE9ic2VydmFibGVcclxue1xyXG4gICAgY29uc3RydWN0b3IoKSBcclxuICAgIHtcclxuICAgICAgICBzdXBlcigpXHJcbiAgICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdIC8vZGIgaW4gYXJyYXkgbG9sXHJcbiAgICB9XHJcbiAgICBhZGRNZXNzYWdlKGNvbnRlbnQpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKG5ldyBNZXNzYWdlKGNvbnRlbnQpKTtcclxuICAgIH1cclxuICAgIHB1dExhc3RNZXNzYWdlSW50b1ZpZXcoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMubm90aWZ5QWxsKFwidmlld190YWtlX3RoaXNcIiwgdGhpcy5tZXNzYWdlc1t0aGlzLm1lc3NhZ2VzLmxlbmd0aC0xXSlcclxuICAgIH1cclxuICAgIG9uKG9iaiwgZXZlbnQsIGRhdGEpIFxyXG4gICAge1xyXG4gICAgICAgIGlmKGV2ZW50ID09IFwiZGF0YV9va19sZXRzX3NlbmRfaXRcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZShkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5wdXRMYXN0TWVzc2FnZUludG9WaWV3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtPYnNlcnZhYmxlfSBmcm9tIFwiLi9vYnNlcnZhYmxlXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBDb250cm9sbGVyICBleHRlbmRzIE9ic2VydmFibGVcclxue1xyXG4gICAgY29uc3RydWN0b3IoKSBcclxuICAgIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uKG9iaiwgZXZlbnQsIGRhdGEpIFxyXG4gICAge1xyXG4gICAgICAgIGlmKGV2ZW50PT1cInVzZXJfd2FudHNfdG9fc2VuZFwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5jaGVja0RhdGEoZGF0YSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5QWxsKFwiZGF0YV9va19sZXRzX3NlbmRfaXRcIiwgZGF0YSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihldmVudD09XCJzb21lYm9keSB3YW50cyB0byBjYW1lIGluXCIsIGRhdGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZih0aGlzLlNlY3VyaXR5KGRhdGEpKXtcclxuICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUFsbChcImxvZyBpblwiLCBkYXRhKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrRGF0YShkYXRhKVxyXG4gICAge1xyXG4gICAgICAgIGlmKGRhdGEhPVwiXCIpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgU2VjdXJpdHkoZGF0YSlcclxuICAgIHtcclxuICAgICAgICBpZihkYXRhWzBdIT0nYWRtaW4nKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YVswXSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoZGF0YVsxXSE9J2FkbWluJyl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGFbMV0pXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtWaWV3fSBmcm9tIFwiLi92aWV3XCJcclxuaW1wb3J0IHtNb2RlbH0gZnJvbSBcIi4vbW9kZWxcIlxyXG5pbXBvcnQge0NvbnRyb2xsZXJ9IGZyb20gXCIuL2NvbnRyb2xsZXJcIlxyXG5cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyXHJcbihcclxuICAgIFwiRE9NQ29udGVudExvYWRlZFwiLCBcclxuICAgIGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCB2aWV3ID0gbmV3IFZpZXcoKTtcclxuICAgICAgICBjb25zdCBtb2RlbCA9IG5ldyBNb2RlbCgpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQ29udHJvbGxlcigpO1xyXG5cclxuICAgICAgICB2aWV3LmFkZE9ic2VydmVyKGNvbnRyb2xsZXIpO1xyXG4gICAgICAgIG1vZGVsLmFkZE9ic2VydmVyKGNvbnRyb2xsZXIpO1xyXG4gICAgICAgIG1vZGVsLmFkZE9ic2VydmVyKHZpZXcpO1xyXG4gICAgICAgIGNvbnRyb2xsZXIuYWRkT2JzZXJ2ZXIobW9kZWwpO1xyXG4gICAgfVxyXG4pXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=